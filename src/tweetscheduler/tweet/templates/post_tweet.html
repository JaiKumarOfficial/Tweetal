{% extends 'homepage.html' %}

{% block script %}
<script>
    /*
    $(document).ready(function(){
        $("#sub").click(function(){
        $("#tweet").submit(function(e) {

            e.preventDefault(); // avoid to execute the actual submit of the form.
            if(($('#id_tweet').val()=="") && ($('#id_document').val()=="")) {
                alert('No input');
            }
            else{
                var form = $(this);
                var url = form.attr('action');

                $.ajax({
                       type: "POST",
                       contentType: false,
                       processData: false,
                       url: url,
                       csrfmiddlewaretoken: "{{ csrf_token }}",
                       data: form.serialize(), // serializes the form's elements.
                       success: function()
                       {
                           alert("tweeted"); // show response from the php script.
                       },
                       error: function(error){alert(error);}
                });
            }
        });
        });
    });
    */
</script>
{% endblock %}

{% block content %}
<div style="margin: 15px">
        <h2>NEW TWEET</h2>
        <form id="tweet" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{post_tweet.as_p}}
            <button id="sub" class="btn btn-primary" type="submit">TWEET</button>
        </form>
</div>
{% endblock %}